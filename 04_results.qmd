# Results

```{r setup2, file = "R/chapter_start.R", include = FALSE, cache = FALSE}
library(plm)
library(sandwich)
```

```{r model-setups, include=FALSE}
f <- function(x) format(round(x, 3), big.mark=",")
gm <- list(
  list("raw" = "nobs", "clean" = "Number of Observations", "fmt" = f),
  list("raw" = "logLik", "clean" = "Log Liklihood", "fmt" = f),
  list("raw" = "r.squared", "clean" = "$\\rho^2_0$", "fmt" = f))

cm <- c(
  "sev_day_avg" = "Seven-Day Rolling Avg. Number of Activities",
  "sexFemale" = "Female", 
  "age" = "Age", 
  "fsiq_2" = "IQ", 
  "prescribed_groupAutism" = "Autism", 
  "prescribed_groupSocial Anxiety" = "Social Anxiety", 
  "suicidal_ideation_q31_evenTRUE" = "Suicidal Ideation",
  "energy" = "Energy",
  "motivation" = "Motivation", 
  "area" = "Activity Area",
  "length" = "Distance", 
  "numTrips" = "Number of Activities")

cm_comp <- c(
  "numTrips" = "Number of Activities",
  "log(numTrips + 1)" = "log(Number of Activities",
  "numTrips_squared" = "Number of Activities^2",
  "sev_day_avg" = "Seven-Day Rolling Avg. Number of Activities",
  "area" = "Activity Area",
  "length" = "Distance",
  "log(length)" = "log(Distance)",
  "length_squared" = "Distance^2"
  )
```

## Statistical Modeling

After joining together the semantic activities, other travel pattern parameters, and the responses to the surveys, we created statistical models to investigate the relationship between mental health and travel behavior. In statistical modeling, the selection and comparison of various regression models are crucial steps in understanding the relationships between variables and making predictions. For our analysis, we analyzed an ordinary least squares, fixed effects model, and random effects model to determine which was the best fit for our data. In addition to the model analysis, we accounted for heteroskedasticity and autocorrelation in the selected models.

### Model Analysis and Selection

We first considered an ordinary least squares regression followed by fixed and random effects models. For all three of these models, the motivation, as reported in the evening surveys on a scale from 0-100, served as the dependent variable. The level of motivation is used as a measure for overall subjective well-being. In addition, the seven-day rolling average number of activities, as described previously, served as the independent variable for the models.

### Ordinary Least Squares

Daily motivation levels (y) were considered a function of the seven-day rolling average number of activities (x) described in the previous sections. Using these parameters, a linear regression model was estimated by ordinary least squares (OLS).

\[ADD EQUATION?\]

For linear regressions, it is assumed that the error terms are independently and identically distributed (IID) with a normal distribution of mean 0. The estimates resulting from this model may be inconsistent due to unobserved individual differences (violating the IID assumption). For example, all individuals have a different baseline or typical level of motivation. We want to account for changes in motivation by individual to see how their motviation deviates from its baseline. There are two common econometric techniques, known as fixed effects and random effects, that attempt to account for these baseline measures, which are discussed in the following sections.

### Fixed Effects

\[ADD EQUATION?\]

The fixed effects (FE) model demeans the data by participant and looks at each participant's levels of motivation and seven-day rolling average number of activities individually. The results in having different intercepts for each participant. The FE model is consistent but less efficient because it results in losing degrees of freedom to estimate individual intercepts for each participant. This results in larger standard errors for the estimates which can make it more difficult to recognize significance. The FE model also removes the effect of time constant characteristics, which in this case are the demographic characteristics of each participant. These variables are absorbed by the intercept as they are unique to each participant.

### Random Effects

\[ADD EQUATION?\]

The random effects (RE) model semi-demeans the data by participant. Based on a mean for the entire group, a mean is determined with set standard deviations to represent the data of the entire group. The RE model is appropriate to use if it is believed that the the difference in motivation has an influence on the seven-day rolling average number of activities. It is possible that other variables that influence the seven-day rolling average number of activities are not included which can lead to bias in the model. Unlike the FE model, the RE model is more efficient because degrees of freedom are not lost to more estimates, but the results can be biased.

### Model Comparison and Evaluation

We ran the OLS model, the FE model, and the RE model to predict motivation based on the seven-day rolling average number of activities. The results of these three models are shown in @tbl-olsfere. 

```{r table ols fe re, message=FALSE, echo=FALSE}
#| label: tbl-olsfere
#| tbl-cap: "OLS, FE, and RE Models"
#| warnings: FALSE
 
library(plm) 

tar_load(ols)
tar_load(fe)
tar_load(re)

models_olsfere <- list(
    "Ordinary Least Squares Model" = ols,
    "Fixed Effects Model" = fe,
    "Random Effects Model" = re
   )

modelsummary(models_olsfere, gof_map = gm, coef_map = cm,
              vcov = function(x) vcovHC(x, cluster = "time"),
              estimate = c("{estimate} ({statistic}){stars}"),
              statistic = NULL,
              notes = list("t-statistics in parentheses")
   )
```

We used the Hausman test to determine whether the RE model is more appropriate than the FE model. It tests whether the RE estimates are consistent and efficient compared to the FE estimates. The null hypothesis is that the RE estimates are consistent and efficient, while the alternative hypothesis is that the FE estimates are more efficient. We found, using the Hausman test, that the p-value is 0.0013 which is less than 0.05, which means that the results are significant and we reject the null hypothesis. This implies that the coefficients from the FE model and RE model are sufficiently different from each other, which means that the RE model is inconsistent and the FE model should be used in the analysis.

### Autocorrelation and Heteroskedasticity

When analyzing how motivation changes over time for individual people, autocorrelation and heteroskedasticity can arise as statistical challenges. 

Autocorrelation occurs when observations in a time series are correlated with preceding or succeeding observations, violating the assumption of independence between observations. In the context of studying individual motivation over time, autocorrelation can manifest as a person's motivation level at one point in time being influenced by their motivation level at previous time points. This can lead to biased estimates and inflated significance levels in regression analyses.

Heteroskedasticity refers to the unequal variance of errors across observations in a dataset. In the case of studying motivation over time, heteroskedasticity may arise if the variability in motivation levels differs between individuals or varies systematically over time. This violates the assumption of homoscedasticity, where the variance of the errors remains constant across observations.

Autocorrelation and heteroskedasticity can lead to biased parameter estimates and incorrect inference in statistical models. To address these issues, robust measures for standard errors are used. Specificlaly in our case, Heteroskedasticity and Autocorrelation Consistent (HAC) can be employed. HAC robust standard errors are particularly useful when dealing with time series or panel data where observations may be correlated across time periods. HAC estimators adjust for heteroskedasticity by allowing the variance of the errors to vary across observations. However, they also account for autocorrelation by incorporating a weighting scheme that considers the correlation structure of the data over time. This weighting scheme assigns higher weights to more recent observations and lower weights to distant observations, reflecting the diminishing influence of past observations on current ones.

By adjusting for both heteroskedasticity and autocorrelation, HAC robust standard errors provide more accurate estimates of the standard errors of regression coefficients, ensuring valid statistical inference in the presence of correlated and heteroskedastic data. This makes them particularly well-suited for analyzing time series or panel data where autocorrelation and heteroskedasticity are common concerns. Overall, HAC robust standard errors are essential tools for conducting robust regression analysis in the presence of correlated and heteroskedastic data, ensuring the reliability and validity of statistical inference.

## Effect of Demographic Factors on Motivation

Based on the results of the Hausman test, we found that the FE model should be used in the analysis of the activity pattern and mental health data. One potential downside of the The FE model is that it cannot implement time constant variables. To overcome this limitations, we performed a linear regression analysis to examine how demographic variables (e.g., sex, age, IQ, and group) are associated with the intercepts from the FE model. This allows for understanding of how the baseline levels of motivation differ across different demographic groups. The sex, age, IQ, and group were the independent variables, and the FE intercept values for each userID served as the dependent variable. This model is shown in @tbl-fedemolm.

```{r table fe demo lm, message=FALSE, echo=FALSE}
#| label: tbl-fedemolm
#| tbl-cap: "Fixed Effects and Demographics Regression"

tar_load(fe_model)

modelsummary(fe_model, gof_map = gm, coef_map = cm,
             estimate = c("{estimate} ({statistic}){stars}"),
             statistic = NULL,
             notes = list("t-statistics in parentheses"))
```

The linear model examined the relationship between motivation and various predictor variables, including sex, age, IQ, and group. The analysis revealed several significant findings. First, being female was associated with a decrease in motivation by 6.351 points, on a scale from 0-100, compared to males, which is a statistically significant effect with a p-values \< 0.05. However, age and IQ did not show significant associations with motivation. Conversely, individuals with autism exhibited a substantial decrease in motivation by 10.247 points compared to the control group, and those with social anxiety experienced a similar decrease of 8.544 points, both statistically significant at p \< 0.01. These results suggest that sex and group conditions play significant roles in shaping motivational levels, while age and IQ appear to have limited influence in this context. When looking at the fit of this model to the data, the model explains approximately 26.4% of the variance in motivation, indicating that other unexplored factors may contribute to motivational outcomes. These findings underscore the importance of considering individual differences, particularly sex and group status, when examining levels of motivation.

## Model Comparison for Impact on Motivation

To compare the effects of different aspects of travel behavior on motivation, we conducted a comprehensive analysis considering various factors. Specifically, we examined the impact of the total number of activities, the seven-day rolling average number of activities, the convex hull area, and the total distance traveled on a day.

Analyzing the total number of activities provides insights into the overall level of engagement and mobility of individuals. A higher number of activities may indicate greater involvement in social, recreational, or productive tasks, which could positively result in an increase in motivation. Similarly, a lower number of activities might suggest reduced participation and potential disengagement, possibly leading to decreased motivation.

The seven-day rolling average number of activities allows us to assess the consistency and stability of individuals' activity patterns over time. Fluctuations in this metric may reflect changes in routine, lifestyle adjustments, or shifts in mental well-being, all of which can influence motivation. A higher rolling average may indicate sustained engagement and stability, potentially contributing to higher motivation levels.

The convex hull area represents the spatial extent covered by an individual's activities, providing insights into their travel behavior's spatial distribution and range. A larger convex hull area may suggest greater exploration, mobility, and exposure to diverse environments, which could positively impact motivation through experiences and opportunities. Conversely, a larger convex hull area may suggest a lot of commuting which may lead to a decrease in motivation.

Lastly, the total distance traveled on a day captures the extent of physical movement and travel undertaken by individuals. Longer distances traveled may indicate higher levels of physical activity, exploration, or commuting, all of which can impact energy levels and motivation. Understanding how travel distance relates to motivation can provide valuable insights into the interplay between physical activity and mental well-being.

By examining these different aspects of travel behavior in relation to motivation, we aim to discern which factors have the most significant influence and in what ways. This holistic approach will enable us to gain a comprehensive understanding of how travel behavior interacts with motivation, offering valuable insights for promoting mental well-being and enhancing motivation levels among individuals.

The analysis examined how motivation is influenced by different independent variables across four distinct models: the Number of Activities Model, the Seven-Day Rolling Average Number of Activities Model, the Activity Area Model, and the Distance Traveled Model. Motivation served as the dependent variable in each of these models. The results from these models are shown in @tbl-motivimpact.

```{r table motivation impact, message=FALSE, echo=FALSE}
#| label: tbl-motivimpact
#| tbl-cap: "Comparison of Impacts on Motivation Levels"

tar_load(fe_sevdayavg_mod)
tar_load(fe_numTrips_mod)
tar_load(fe_area_mod)
tar_load(fe_length_mod)

models_fe_paras <- list(
  "Number of Activites Model" = fe_numTrips_mod,
  "Seven-Day Rolling Average Number of Activities Model" = fe_sevdayavg_mod,
  "Activity Area Model" = fe_area_mod,
  "Distance Traveled Model" = fe_length_mod
  )

modelsummary(models_fe_paras, gof_map = gm, coef_map = cm_comp,
             vcov = function(x) vcovHC(x, cluster = "time"),
             estimate = c("{estimate} ({statistic}){stars}"),
             statistic = NULL,
             notes = list("t-statistics in parentheses")
             )
```

The findings from these models suggest that there is a positive relationship between the number of activities and motivation and the relationship is statistically significant. For each additional activity a person engages in, their motivation increases 0.356 points. While motivation is on a scale from 1-100, it may not be reasonable to engage is one more activity in a day to increase motivation by 0.356 points, especially considering that the average number of activities for all of the userID-activity days was 2.65 activities. The seven-day rolling average of activities also shows a potential cumulative effect on motivation, though the evidence is weaker. In contrast, the size of the activity area does not appear to influence motivation, indicating that the physical space covered during the day is less important than the number of activities themselves. Additionally, traveling longer distances during the day might slightly decrease motivation.

Overall, while the number of activities, seven-day rolling average number of activities, and distance traveled are important factor for motivation, the low R-squared values across all models suggest that many other factors not included in this analysis likely play a significant role in determining motivation levels.

### Number of Activities Models

To further analyze the impact of the number of activities, we applied transformations to the independent variable. We looked at the logarithm number of activities and the number of activities squared.

```{r table motivation numActs, message=FALSE, echo=FALSE}
#| label: tbl-motivnumActs
#| tbl-cap: "Comparison of the Number of Activities Models"

tar_load(fe_numTrips_mod)
tar_load(fe_numTrips_log)
tar_load(fe_numTrips_squared)

models_numActs <- list(
  "Number of Activites Model" = fe_numTrips_mod,
  "log(Number of Activites) Model" = fe_numTrips_log,
  "Number of Activites^2 Model" = fe_numTrips_squared
  )

modelsummary(models_numActs, gof_map = gm, coef_map = cm_comp,
             vcov = function(x) vcovHC(x, cluster = "time"),
             estimate = c("{estimate} ({statistic}){stars}"),
             statistic = NULL,
             notes = list("t-statistics in parentheses")
             )
```


### Activity Area Covered