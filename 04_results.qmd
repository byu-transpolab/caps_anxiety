# Results

```{r setup, file = "R/chapter_start.R", include = FALSE, cache = FALSE}
library(plm)
library(sandwich)
```

```{r model-setups, include=FALSE}
f <- function(x) format(round(x, 3), big.mark=",")
gm <- list(
  list("raw" = "Num.Obs.", "clean" = "Number of Observations", "fmt" = f),
  list("raw" = "Log.Lik.", "clean" = "Log Liklihood", "fmt" = f),
  list("raw" = "rho20", "clean" = "$\\rho^2_0$", "fmt" = f))

cm <- c(
  "sev_day_avg" = "7-Day Rolling Avg. Number of Activities",
  "sexFemale" = "Female", 
  "age" = "Age", 
  "fsiq_2" = "IQ", 
  "prescribed_groupAutism" = "Autism", 
  "prescribed_groupSocial Anxiety" = "Social Anxiety", 
  "suicidal_ideation_q31_evenTRUE" = "Suicidal Ideation",
  "energy" = "Energy",
  "motivation" = "Motivation")
  
cm_group <- c(
  "numTrips" = "Number of Activities",
  "sev_day_avg" = "7-Day Rolling Avg. Number of Activities",
  "park" = "Visits to Parks",
  "grocery" = "Visits to Grocery Store",
  "library" = "Visits to Libraries",
  "social_rec" = "Visits to Social Recreation Locations")
```

## Statistical Modeling

After joining together the semantic activities and the responses to the surveys, statistical models were created to investigate the relationship between mental health and travel behavior. In statistical modeling, the selection and comparison of various regression models are crucial steps in understanding the relationships between variables and making predictions. For our analysis, we analyzed an ordinary least squares, fixed effects model, and random effects model.

### Model Analysis and Selection

Ordinary least squares (OLS) regression was considered followed by fixed and random effects models.

For the OLS regression, the motivation as reported in the evening surveys on a scale from 0-100 was considered as a function of the 7-day rolling average number of activities engaged in as described previously. Since each participant in the study will likely have different base levels of motivation, we want to consider looking at each participants' differences in motivation

The fixed effects (FE) model demeans the data by participant and looks at each participant's motivation and 7-day rolling average number of activities individually. The results in having different intercepts for each participant. This model is consistent but less efficient because it results in losing degrees of freedom to estimate individual intercepts for each participant. This results in larger standard errors for the estimates which can make it more difficult to recognize significance. The FE model also removes the effect of time constant characteristics, which in this case are the demographic characteristics of each participant. These variables are absorbed by the intercept as they are unique to each participant.

The random effects (RE) model semi-demeans the data by participant. Based on a mean for the entire group, a mean is determined with set standard deviations to represent the data pf the entire group. The RE model is appropriate to use if it is believed that the the difference in motivation has an influence on the 7-day rolling average number of activities. It is possible that other variables that influence the 7-day rolling average number of activities are not included which can lead to bias in the model. Unlike the FE model, the RE model is more efficient because degrees of freedom are not lost to more estimates, but the results can be biased.

We ran to OLS model, the FE model, and the RE model to predict motivation based on the 7-day rolling average number of activities. These three models are shown in @tbl-olsfere. The Hausman test is used to determine whether the random effects model is more appropriate than the fixed effects model. It tests whether the random effects estimator is consistent and efficient compared to the fixed effects estimator. The null hypothesis is that the random effects estimator is consistent and efficient, while the alternative hypothesis is that the fixed effects estimator is more efficient. We found, using the Hausman test, that the p-value is 0.0013 which is less than 0.05, which means that the results are significant and we reject the null hypothesis. This implies that the coefficients from the FE model and RE model are sufficiently different from each other, which means that the RE model is inconsistent and the FE model should be used in the analysis.

```{r table ols fe re, message=FALSE, echo=FALSE}
# #| label: tbl-olsfere
# #| tbl-cap: "OLS, FE, and RE Models"
# #| warnings: FALSE
# 
# tar_load(ols)
# tar_load(fe)
# tar_load(re)
# 
# models <- list(
#     "Ordinary Least Squares Model" = ols,
#     "Fixed Effects Model" = fe,
#     "Random Effect Model" = re
#   )
# 
# modelsummary(models, gof_map = gm, coef_map = cm, 
#              # vcov = "HAC",
#              estimate = c("{estimate) ({statistic}){stars}"),
#              statistic = NULL,
#              notes = list("t-statistics in parentheses")
  # )
```

When analyzing how motivation changes over time for individual people, autocorrelation and heteroskedasticity can arise as statistical challenges. Autocorrelation occurs when observations in a time series are correlated with preceding or succeeding observations, violating the assumption of independence between observations. In the context of studying individual motivation over time, autocorrelation can manifest as a person's motivation level at one point in time being influenced by their motivation level at previous time points. This can lead to biased estimates and inflated significance levels in regression analyses.

Heteroskedasticity refers to the unequal variance of errors across observations in a dataset. In the case of studying motivation over time, heteroskedasticity may arise if the variability in motivation levels differs between individuals or varies systematically over time. This violates the assumption of homoscedasticity, where the variance of the errors remains constant across observations.

Autocorrelation and heteroskedasticity can lead to biased parameter estimates and incorrect inference in statistical models. To address these issues, robust measures for standard errors, such as

Heteroskedasticity-Consistent Autocorrelation (HCA) can be employed. HCA robust standard errors are particularly useful when dealing with time series or panel data where observations may be correlated across time periods. HCA estimators adjust for heteroskedasticity by allowing the variance of the errors to vary across observations. However, they also account for autocorrelation by incorporating a weighting scheme that considers the correlation structure of the data over time. This weighting scheme assigns higher weights to more recent observations and lower weights to distant observations, reflecting the diminishing influence of past observations on current ones.

By adjusting for both heteroskedasticity and autocorrelation, HCA robust standard errors provide more accurate estimates of the standard errors of regression coefficients, ensuring valid statistical inference in the presence of correlated and heteroskedastic data. This makes them particularly well-suited for analyzing time series or panel data where autocorrelation and heteroskedasticity are common concerns. Overall, HCA robust standard errors are essential tools for conducting robust regression analysis in the presence of correlated and heteroskedastic data, ensuring the reliability and validity of statistical inference.

## Effect of Demographic Factors on Motivation

Since the FE model cannot implement time constant variables, a linear regression analysis was implemented to examine how demographic variables (e.g., sex, age, IQ, and group) are associated with the intercepts. This allows for understanding how the baseline level of motivation differs across different demographic groups. The sex, age, IQ, and group were the independent variables, and the fixed effects intercept values for each user served as the dependent variable. This model is shown in @tbl-fedemolm.

```{r table fe demo lm, message=FALSE, echo=FALSE}
#| label: tbl-fedemolm
#| tbl-cap: "Fixed Effects and Demographics Regression"

tar_load(fe_model)

modelsummary(fe_model, gof_map = gm, coef_map = cm,
             estimate = c("{estimate} ({statistic}){stars}"),
             statistic = NULL,
             notes = list("t-statistics in parentheses"))
```

The linear model examined the relationship between motivation and various predictor variables, including gender, age, IQ, and group. The analysis revealed several significant findings. First, being female was associated with a decrease in motivation by 6.311 points on a scale from 0-100 compared to males, a statistically significant effect. However, age and IQ did not show significant associations with motivation. Conversely, individuals with autism exhibited a substantial decrease in motivation by 10.732 points compared to the control group, and those with social anxiety experienced a similar decrease of 9.039 points, both statistically significant at p < 0.05. These results suggest that gender and group conditions play significant roles in shaping motivational levels, while age and IQ appear to have limited influence in this context. The model explained approximately 26.6% of the variance in motivation, indicating that other unexplored factors may contribute to motivational outcomes. These findings underscore the importance of considering individual differences, particularly gender and group status, when examining motivational behavior.

## Model Comparison for Impact on Motivation

To compare the effects of different aspects of travel behavior on motivation, we conducted a comprehensive analysis considering various factors. Specifically, we examined the impact of the total number of activities, the seven-day rolling average number of activities, the convex hull area, and the total distance traveled on a day.

Analyzing the total number of activities provides insights into the overall level of engagement and mobility of individuals. A higher number of activities may indicate greater involvement in social, recreational, or productive tasks, which could positively result in an increase in motivation. Similarly, a lower number of activities might suggest reduced participation and potential disengagement, possibly leading to decreased motivation.

The seven-day rolling average number of activities allows us to assess the consistency and stability of individuals' activity patterns over time. Fluctuations in this metric may reflect changes in routine, lifestyle adjustments, or shifts in mental well-being, all of which can influence motivation. A higher rolling average may indicate sustained engagement and stability, potentially contributing to higher motivation levels.

The convex hull area represents the spatial extent covered by an individual's activities, providing insights into their travel behavior's spatial distribution and range. A larger convex hull area may suggest greater exploration, mobility, and exposure to diverse environments, which could positively impact motivation through experiences and opportunities. Conversely, a larger convex hull area may suggest a lot of commuting which may lead to a decrease in motivation.

Lastly, the total distance traveled on a day captures the extent of physical movement and travel undertaken by individuals. Longer distances traveled may indicate higher levels of physical activity, exploration, or commuting, all of which can impact energy levels and motivation. Understanding how travel distance relates to motivation can provide valuable insights into the interplay between physical activity and mental well-being.

By examining these different aspects of travel behavior in relation to motivation, we aim to discern which factors have the most significant influence and in what ways. This holistic approach will enable us to gain a comprehensive understanding of how travel behavior interacts with motivation, offering valuable insights for promoting mental well-being and enhancing motivation levels among individuals.

```{r table motivation impact, message=FALSE, echo=FALSE}
#| label: tbl-motivimpact
#| tbl-cap: "Fixed Effects and Demographics Regression"
# 
# tar_load(fe_sevdayavg_mod)
# tar_load(fe_numTrips_mod)
# tar_load(fe_area_mod)
# tar_load(fe_length_mod)
# 
# models <- list(
#   "Number of Activites" = fe_numTrips_mod,
#   "Seven Day Rolling Average Number of Activities" = fe_sevdayavg_mod,
#   "Convex Hull Area" = fe_area_mod,
#   "Distrance Travelled" = fe_length_mod
#   )
# 
# modelsummary(models, gof_map = gm, coef_map = cm, 
#              # vcov = "HAC",
#              estimate = c("{estimate) ({statistic}){stars}"),
#              statistic = NULL,
#              notes = list("t-statistics in parentheses")
#   )
```


